==7600== Memcheck, a memory error detector
==7600== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
==7600== Using Valgrind-3.15.0 and LibVEX; rerun with -h for copyright info
==7600== Command: ./tests/fsm_stream_reassembler_many
==7600== 
[..tream_reassembler.cc:56 (push_substring)] Before function mergeSubstrings
[..tream_reassembler.cc:57 (push_substring)] _index = 0 (unsigned long)
[..tream_reassembler.cc:58 (push_substring)] _expectedNextByte = 0 (unsigned long)
[..tream_reassembler.cc:59 (push_substring)] data.size() = 1024 (unsigned long)
[..tream_reassembler.cc:76 (push_substring)] After function mergeSubstrings
[..tream_reassembler.cc:77 (push_substring)] _index = 0 (unsigned long)
[..tream_reassembler.cc:78 (push_substring)] _expectedNextByte = 0 (unsigned long)
[..tream_reassembler.cc:86 (push_substring)] front.first = 0 (unsigned long)
[..tream_reassembler.cc:87 (push_substring)] front.second.size() = 1024 (unsigned long)
[..tream_reassembler.cc:88 (push_substring)] front.second = "0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123" (std::string)
[..tream_reassembler.cc:104 (push_substring)] After write
[..tream_reassembler.cc:105 (push_substring)] _expectedNextByte = 1024 (unsigned long)
[..tream_reassembler.cc:106 (push_substring)] _output.peek_output(_output.buffer_size()) = "0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123" (std::string)
[..tream_reassembler.cc:56 (push_substring)] Before function mergeSubstrings
[..tream_reassembler.cc:57 (push_substring)] _index = 1034 (unsigned long)
[..tream_reassembler.cc:58 (push_substring)] _expectedNextByte = 1024 (unsigned long)
[..tream_reassembler.cc:59 (push_substring)] data.size() = 1014 (unsigned long)
[..tream_reassembler.cc:76 (push_substring)] After function mergeSubstrings
[..tream_reassembler.cc:77 (push_substring)] _index = 1034 (unsigned long)
[..tream_reassembler.cc:78 (push_substring)] _expectedNextByte = 1024 (unsigned long)
[..tream_reassembler.cc:104 (push_substring)] After write
[..tream_reassembler.cc:105 (push_substring)] _expectedNextByte = 1024 (unsigned long)
[..tream_reassembler.cc:106 (push_substring)] _output.peek_output(_output.buffer_size()) = "0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123" (std::string)
[..tream_reassembler.cc:56 (push_substring)] Before function mergeSubstrings
[..tream_reassembler.cc:57 (push_substring)] _index = 1024 (unsigned long)
[..tream_reassembler.cc:58 (push_substring)] _expectedNextByte = 1024 (unsigned long)
[..tream_reassembler.cc:59 (push_substring)] data.size() = 15 (unsigned long)
[..tream_reassembler.cc:160 (mergeSubstrings)] data.size() = 15 (unsigned long)
[..tream_reassembler.cc:161 (mergeSubstrings)] overlapCount = 5 (unsigned long)
==7600== Invalid read of size 8
==7600==    at 0x112ABA: operator<< <char, std::char_traits<char>, std::allocator<char> > (basic_string.h:6328)
==7600==    by 0x112ABA: pretty_print (dbg.h:562)
==7600==    by 0x112ABA: std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >& dbg::DebugOutput::print_impl<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&>(char const* const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&) (dbg.h:687)
==7600==    by 0x10DF1B: print<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&> (dbg.h:679)
==7600==    by 0x10DF1B: StreamReassembler::mergeSubstrings(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long) (stream_reassembler.cc:162)
==7600==    by 0x10E960: StreamReassembler::push_substring(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, bool) (stream_reassembler.cc:66)
==7600==    by 0x10C188: main (fsm_stream_reassembler_many.cc:112)
==7600==  Address 0x4dbcd80 is 32 bytes inside a block of size 56 free'd
==7600==    at 0x483CFBF: operator delete(void*) (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==7600==    by 0x10DC41: deallocate (new_allocator.h:125)
==7600==    by 0x10DC41: deallocate (alloc_traits.h:462)
==7600==    by 0x10DC41: _M_put_node (stl_list.h:454)
==7600==    by 0x10DC41: _M_erase (stl_list.h:1922)
==7600==    by 0x10DC41: erase (list.tcc:158)
==7600==    by 0x10DC41: StreamReassembler::mergeSubstrings(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long) (stream_reassembler.cc:153)
==7600==    by 0x10E960: StreamReassembler::push_substring(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, bool) (stream_reassembler.cc:66)
==7600==    by 0x10C188: main (fsm_stream_reassembler_many.cc:112)
==7600==  Block was alloc'd at
==7600==    at 0x483BE63: operator new(unsigned long) (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==7600==    by 0x10D83C: allocate (new_allocator.h:111)
==7600==    by 0x10D83C: allocate (alloc_traits.h:436)
==7600==    by 0x10D83C: _M_get_node (stl_list.h:450)
==7600==    by 0x10D83C: _M_create_node<std::pair<long unsigned int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > (stl_list.h:642)
==7600==    by 0x10D83C: _M_insert<std::pair<long unsigned int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > (stl_list.h:1903)
==7600==    by 0x10D83C: push_back (stl_list.h:1225)
==7600==    by 0x10D83C: StreamReassembler::mergeSubstrings(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long) (stream_reassembler.cc:123)
==7600==    by 0x10E960: StreamReassembler::push_substring(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, bool) (stream_reassembler.cc:66)
==7600==    by 0x10C0E2: main (fsm_stream_reassembler_many.cc:102)
==7600== 
==7600== Invalid read of size 8
==7600==    at 0x112ABE: operator<< <char, std::char_traits<char>, std::allocator<char> > (basic_string.h:6328)
==7600==    by 0x112ABE: pretty_print (dbg.h:562)
==7600==    by 0x112ABE: std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >& dbg::DebugOutput::print_impl<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&>(char const* const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&) (dbg.h:687)
==7600==    by 0x10DF1B: print<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&> (dbg.h:679)
==7600==    by 0x10DF1B: StreamReassembler::mergeSubstrings(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long) (stream_reassembler.cc:162)
==7600==    by 0x10E960: StreamReassembler::push_substring(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, bool) (stream_reassembler.cc:66)
==7600==    by 0x10C188: main (fsm_stream_reassembler_many.cc:112)
==7600==  Address 0x4dbcd78 is 24 bytes inside a block of size 56 free'd
==7600==    at 0x483CFBF: operator delete(void*) (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==7600==    by 0x10DC41: deallocate (new_allocator.h:125)
==7600==    by 0x10DC41: deallocate (alloc_traits.h:462)
==7600==    by 0x10DC41: _M_put_node (stl_list.h:454)
==7600==    by 0x10DC41: _M_erase (stl_list.h:1922)
==7600==    by 0x10DC41: erase (list.tcc:158)
==7600==    by 0x10DC41: StreamReassembler::mergeSubstrings(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long) (stream_reassembler.cc:153)
==7600==    by 0x10E960: StreamReassembler::push_substring(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, bool) (stream_reassembler.cc:66)
==7600==    by 0x10C188: main (fsm_stream_reassembler_many.cc:112)
==7600==  Block was alloc'd at
==7600==    at 0x483BE63: operator new(unsigned long) (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==7600==    by 0x10D83C: allocate (new_allocator.h:111)
==7600==    by 0x10D83C: allocate (alloc_traits.h:436)
==7600==    by 0x10D83C: _M_get_node (stl_list.h:450)
==7600==    by 0x10D83C: _M_create_node<std::pair<long unsigned int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > (stl_list.h:642)
==7600==    by 0x10D83C: _M_insert<std::pair<long unsigned int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > (stl_list.h:1903)
==7600==    by 0x10D83C: push_back (stl_list.h:1225)
==7600==    by 0x10D83C: StreamReassembler::mergeSubstrings(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long) (stream_reassembler.cc:123)
==7600==    by 0x10E960: StreamReassembler::push_substring(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, bool) (stream_reassembler.cc:66)
==7600==    by 0x10C0E2: main (fsm_stream_reassembler_many.cc:102)
==7600== 
==7600== Invalid read of size 1
==7600==    at 0x4842B60: memmove (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==7600==    by 0x499B647: std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==7600==    by 0x498D9B3: std::basic_ostream<char, std::char_traits<char> >& std::__ostream_insert<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*, long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==7600==    by 0x112AC5: operator<< <char, std::char_traits<char>, std::allocator<char> > (basic_string.h:6328)
==7600==    by 0x112AC5: pretty_print (dbg.h:562)
==7600==    by 0x112AC5: std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >& dbg::DebugOutput::print_impl<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&>(char const* const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&) (dbg.h:687)
==7600==    by 0x10DF1B: print<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&> (dbg.h:679)
==7600==    by 0x10DF1B: StreamReassembler::mergeSubstrings(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long) (stream_reassembler.cc:162)
==7600==    by 0x10E960: StreamReassembler::push_substring(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, bool) (stream_reassembler.cc:66)
==7600==    by 0x10C188: main (fsm_stream_reassembler_many.cc:112)
==7600==  Address 0x4dbc920 is 0 bytes inside a block of size 1,015 free'd
==7600==    at 0x483CFBF: operator delete(void*) (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==7600==    by 0x10DC27: deallocate (new_allocator.h:125)
==7600==    by 0x10DC27: deallocate (alloc_traits.h:462)
==7600==    by 0x10DC27: _M_destroy (basic_string.h:226)
==7600==    by 0x10DC27: _M_dispose (basic_string.h:221)
==7600==    by 0x10DC27: ~basic_string (basic_string.h:657)
==7600==    by 0x10DC27: ~pair (stl_pair.h:208)
==7600==    by 0x10DC27: destroy<std::pair<long unsigned int, std::__cxx11::basic_string<char> > > (new_allocator.h:140)
==7600==    by 0x10DC27: destroy<std::pair<long unsigned int, std::__cxx11::basic_string<char> > > (alloc_traits.h:487)
==7600==    by 0x10DC27: _M_erase (stl_list.h:1917)
==7600==    by 0x10DC27: erase (list.tcc:158)
==7600==    by 0x10DC27: StreamReassembler::mergeSubstrings(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long) (stream_reassembler.cc:153)
==7600==    by 0x10E960: StreamReassembler::push_substring(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, bool) (stream_reassembler.cc:66)
==7600==    by 0x10C188: main (fsm_stream_reassembler_many.cc:112)
==7600==  Block was alloc'd at
==7600==    at 0x483BE63: operator new(unsigned long) (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==7600==    by 0x10CEE2: allocate (new_allocator.h:111)
==7600==    by 0x10CEE2: allocate (alloc_traits.h:436)
==7600==    by 0x10CEE2: _M_create (basic_string.tcc:153)
==7600==    by 0x10CEE2: void std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_construct<char*>(char*, char*, std::forward_iterator_tag) [clone .constprop.73] (basic_string.tcc:219)
==7600==    by 0x10D832: _M_construct_aux<char*> (basic_string.h:236)
==7600==    by 0x10D832: _M_construct<char*> (basic_string.h:255)
==7600==    by 0x10D832: basic_string (basic_string.h:440)
==7600==    by 0x10D832: pair<> (stl_pair.h:261)
==7600==    by 0x10D832: make_pair<long unsigned int const&, const std::__cxx11::basic_string<char>&> (stl_pair.h:529)
==7600==    by 0x10D832: StreamReassembler::mergeSubstrings(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long) (stream_reassembler.cc:123)
==7600==    by 0x10E960: StreamReassembler::push_substring(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, bool) (stream_reassembler.cc:66)
==7600==    by 0x10C0E2: main (fsm_stream_reassembler_many.cc:102)
==7600== 
==7600== Invalid read of size 1
==7600==    at 0x4842B6E: memmove (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==7600==    by 0x499B647: std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==7600==    by 0x498D9B3: std::basic_ostream<char, std::char_traits<char> >& std::__ostream_insert<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*, long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==7600==    by 0x112AC5: operator<< <char, std::char_traits<char>, std::allocator<char> > (basic_string.h:6328)
==7600==    by 0x112AC5: pretty_print (dbg.h:562)
==7600==    by 0x112AC5: std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >& dbg::DebugOutput::print_impl<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&>(char const* const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&) (dbg.h:687)
==7600==    by 0x10DF1B: print<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&> (dbg.h:679)
==7600==    by 0x10DF1B: StreamReassembler::mergeSubstrings(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long) (stream_reassembler.cc:162)
==7600==    by 0x10E960: StreamReassembler::push_substring(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, bool) (stream_reassembler.cc:66)
==7600==    by 0x10C188: main (fsm_stream_reassembler_many.cc:112)
==7600==  Address 0x4dbc922 is 2 bytes inside a block of size 1,015 free'd
==7600==    at 0x483CFBF: operator delete(void*) (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==7600==    by 0x10DC27: deallocate (new_allocator.h:125)
==7600==    by 0x10DC27: deallocate (alloc_traits.h:462)
==7600==    by 0x10DC27: _M_destroy (basic_string.h:226)
==7600==    by 0x10DC27: _M_dispose (basic_string.h:221)
==7600==    by 0x10DC27: ~basic_string (basic_string.h:657)
==7600==    by 0x10DC27: ~pair (stl_pair.h:208)
==7600==    by 0x10DC27: destroy<std::pair<long unsigned int, std::__cxx11::basic_string<char> > > (new_allocator.h:140)
==7600==    by 0x10DC27: destroy<std::pair<long unsigned int, std::__cxx11::basic_string<char> > > (alloc_traits.h:487)
==7600==    by 0x10DC27: _M_erase (stl_list.h:1917)
==7600==    by 0x10DC27: erase (list.tcc:158)
==7600==    by 0x10DC27: StreamReassembler::mergeSubstrings(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long) (stream_reassembler.cc:153)
==7600==    by 0x10E960: StreamReassembler::push_substring(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, bool) (stream_reassembler.cc:66)
==7600==    by 0x10C188: main (fsm_stream_reassembler_many.cc:112)
==7600==  Block was alloc'd at
==7600==    at 0x483BE63: operator new(unsigned long) (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==7600==    by 0x10CEE2: allocate (new_allocator.h:111)
==7600==    by 0x10CEE2: allocate (alloc_traits.h:436)
==7600==    by 0x10CEE2: _M_create (basic_string.tcc:153)
==7600==    by 0x10CEE2: void std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_construct<char*>(char*, char*, std::forward_iterator_tag) [clone .constprop.73] (basic_string.tcc:219)
==7600==    by 0x10D832: _M_construct_aux<char*> (basic_string.h:236)
==7600==    by 0x10D832: _M_construct<char*> (basic_string.h:255)
==7600==    by 0x10D832: basic_string (basic_string.h:440)
==7600==    by 0x10D832: pair<> (stl_pair.h:261)
==7600==    by 0x10D832: make_pair<long unsigned int const&, const std::__cxx11::basic_string<char>&> (stl_pair.h:529)
==7600==    by 0x10D832: StreamReassembler::mergeSubstrings(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long) (stream_reassembler.cc:123)
==7600==    by 0x10E960: StreamReassembler::push_substring(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, bool) (stream_reassembler.cc:66)
==7600==    by 0x10C0E2: main (fsm_stream_reassembler_many.cc:102)
==7600== 
==7600== Invalid read of size 1
==7600==    at 0x499B670: std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==7600==    by 0x498D9B3: std::basic_ostream<char, std::char_traits<char> >& std::__ostream_insert<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*, long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==7600==    by 0x112AC5: operator<< <char, std::char_traits<char>, std::allocator<char> > (basic_string.h:6328)
==7600==    by 0x112AC5: pretty_print (dbg.h:562)
==7600==    by 0x112AC5: std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >& dbg::DebugOutput::print_impl<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&>(char const* const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&) (dbg.h:687)
==7600==    by 0x10DF1B: print<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&> (dbg.h:679)
==7600==    by 0x10DF1B: StreamReassembler::mergeSubstrings(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long) (stream_reassembler.cc:162)
==7600==    by 0x10E960: StreamReassembler::push_substring(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, bool) (stream_reassembler.cc:66)
==7600==    by 0x10C188: main (fsm_stream_reassembler_many.cc:112)
==7600==  Address 0x4dbc92e is 14 bytes inside a block of size 1,015 free'd
==7600==    at 0x483CFBF: operator delete(void*) (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==7600==    by 0x10DC27: deallocate (new_allocator.h:125)
==7600==    by 0x10DC27: deallocate (alloc_traits.h:462)
==7600==    by 0x10DC27: _M_destroy (basic_string.h:226)
==7600==    by 0x10DC27: _M_dispose (basic_string.h:221)
==7600==    by 0x10DC27: ~basic_string (basic_string.h:657)
==7600==    by 0x10DC27: ~pair (stl_pair.h:208)
==7600==    by 0x10DC27: destroy<std::pair<long unsigned int, std::__cxx11::basic_string<char> > > (new_allocator.h:140)
==7600==    by 0x10DC27: destroy<std::pair<long unsigned int, std::__cxx11::basic_string<char> > > (alloc_traits.h:487)
==7600==    by 0x10DC27: _M_erase (stl_list.h:1917)
==7600==    by 0x10DC27: erase (list.tcc:158)
==7600==    by 0x10DC27: StreamReassembler::mergeSubstrings(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long) (stream_reassembler.cc:153)
==7600==    by 0x10E960: StreamReassembler::push_substring(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, bool) (stream_reassembler.cc:66)
==7600==    by 0x10C188: main (fsm_stream_reassembler_many.cc:112)
==7600==  Block was alloc'd at
==7600==    at 0x483BE63: operator new(unsigned long) (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==7600==    by 0x10CEE2: allocate (new_allocator.h:111)
==7600==    by 0x10CEE2: allocate (alloc_traits.h:436)
==7600==    by 0x10CEE2: _M_create (basic_string.tcc:153)
==7600==    by 0x10CEE2: void std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_construct<char*>(char*, char*, std::forward_iterator_tag) [clone .constprop.73] (basic_string.tcc:219)
==7600==    by 0x10D832: _M_construct_aux<char*> (basic_string.h:236)
==7600==    by 0x10D832: _M_construct<char*> (basic_string.h:255)
==7600==    by 0x10D832: basic_string (basic_string.h:440)
==7600==    by 0x10D832: pair<> (stl_pair.h:261)
==7600==    by 0x10D832: make_pair<long unsigned int const&, const std::__cxx11::basic_string<char>&> (stl_pair.h:529)
==7600==    by 0x10D832: StreamReassembler::mergeSubstrings(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long) (stream_reassembler.cc:123)
==7600==    by 0x10E960: StreamReassembler::push_substring(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, bool) (stream_reassembler.cc:66)
==7600==    by 0x10C0E2: main (fsm_stream_reassembler_many.cc:102)
==7600== 
[..tream_reassembler.cc:162 (mergeSubstrings)] currentInterval.second = "012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123" (std::string)
==7600== Invalid read of size 8
==7600==    at 0x10DFAE: append (basic_string.h:1222)
==7600==    by 0x10DFAE: operator+<char, std::char_traits<char>, std::allocator<char> > (basic_string.h:5994)
==7600==    by 0x10DFAE: StreamReassembler::mergeSubstrings(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long) (stream_reassembler.cc:164)
==7600==    by 0x10E960: StreamReassembler::push_substring(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, bool) (stream_reassembler.cc:66)
==7600==    by 0x10C188: main (fsm_stream_reassembler_many.cc:112)
==7600==  Address 0x4dbcd80 is 32 bytes inside a block of size 56 free'd
==7600==    at 0x483CFBF: operator delete(void*) (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==7600==    by 0x10DC41: deallocate (new_allocator.h:125)
==7600==    by 0x10DC41: deallocate (alloc_traits.h:462)
==7600==    by 0x10DC41: _M_put_node (stl_list.h:454)
==7600==    by 0x10DC41: _M_erase (stl_list.h:1922)
==7600==    by 0x10DC41: erase (list.tcc:158)
==7600==    by 0x10DC41: StreamReassembler::mergeSubstrings(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long) (stream_reassembler.cc:153)
==7600==    by 0x10E960: StreamReassembler::push_substring(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, bool) (stream_reassembler.cc:66)
==7600==    by 0x10C188: main (fsm_stream_reassembler_many.cc:112)
==7600==  Block was alloc'd at
==7600==    at 0x483BE63: operator new(unsigned long) (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==7600==    by 0x10D83C: allocate (new_allocator.h:111)
==7600==    by 0x10D83C: allocate (alloc_traits.h:436)
==7600==    by 0x10D83C: _M_get_node (stl_list.h:450)
==7600==    by 0x10D83C: _M_create_node<std::pair<long unsigned int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > (stl_list.h:642)
==7600==    by 0x10D83C: _M_insert<std::pair<long unsigned int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > (stl_list.h:1903)
==7600==    by 0x10D83C: push_back (stl_list.h:1225)
==7600==    by 0x10D83C: StreamReassembler::mergeSubstrings(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long) (stream_reassembler.cc:123)
==7600==    by 0x10E960: StreamReassembler::push_substring(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, bool) (stream_reassembler.cc:66)
==7600==    by 0x10C0E2: main (fsm_stream_reassembler_many.cc:102)
==7600== 
==7600== Invalid read of size 8
==7600==    at 0x10DFC0: append (basic_string.h:1222)
==7600==    by 0x10DFC0: operator+<char, std::char_traits<char>, std::allocator<char> > (basic_string.h:5994)
==7600==    by 0x10DFC0: StreamReassembler::mergeSubstrings(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long) (stream_reassembler.cc:164)
==7600==    by 0x10E960: StreamReassembler::push_substring(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, bool) (stream_reassembler.cc:66)
==7600==    by 0x10C188: main (fsm_stream_reassembler_many.cc:112)
==7600==  Address 0x4dbcd78 is 24 bytes inside a block of size 56 free'd
==7600==    at 0x483CFBF: operator delete(void*) (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==7600==    by 0x10DC41: deallocate (new_allocator.h:125)
==7600==    by 0x10DC41: deallocate (alloc_traits.h:462)
==7600==    by 0x10DC41: _M_put_node (stl_list.h:454)
==7600==    by 0x10DC41: _M_erase (stl_list.h:1922)
==7600==    by 0x10DC41: erase (list.tcc:158)
==7600==    by 0x10DC41: StreamReassembler::mergeSubstrings(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long) (stream_reassembler.cc:153)
==7600==    by 0x10E960: StreamReassembler::push_substring(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, bool) (stream_reassembler.cc:66)
==7600==    by 0x10C188: main (fsm_stream_reassembler_many.cc:112)
==7600==  Block was alloc'd at
==7600==    at 0x483BE63: operator new(unsigned long) (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==7600==    by 0x10D83C: allocate (new_allocator.h:111)
==7600==    by 0x10D83C: allocate (alloc_traits.h:436)
==7600==    by 0x10D83C: _M_get_node (stl_list.h:450)
==7600==    by 0x10D83C: _M_create_node<std::pair<long unsigned int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > (stl_list.h:642)
==7600==    by 0x10D83C: _M_insert<std::pair<long unsigned int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > (stl_list.h:1903)
==7600==    by 0x10D83C: push_back (stl_list.h:1225)
==7600==    by 0x10D83C: StreamReassembler::mergeSubstrings(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long) (stream_reassembler.cc:123)
==7600==    by 0x10E960: StreamReassembler::push_substring(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, bool) (stream_reassembler.cc:66)
==7600==    by 0x10C0E2: main (fsm_stream_reassembler_many.cc:102)
==7600== 
==7600== Invalid read of size 2
==7600==    at 0x4842B30: memmove (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==7600==    by 0x1109E9: copy (char_traits.h:352)
==7600==    by 0x1109E9: _S_copy (basic_string.h:340)
==7600==    by 0x1109E9: std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_mutate(unsigned long, unsigned long, char const*, unsigned long) (basic_string.tcc:322)
==7600==    by 0x10E3C8: _M_append (basic_string.tcc:370)
==7600==    by 0x10E3C8: append (basic_string.h:1222)
==7600==    by 0x10E3C8: operator+<char, std::char_traits<char>, std::allocator<char> > (basic_string.h:5994)
==7600==    by 0x10E3C8: StreamReassembler::mergeSubstrings(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long) (stream_reassembler.cc:164)
==7600==    by 0x10E960: StreamReassembler::push_substring(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, bool) (stream_reassembler.cc:66)
==7600==    by 0x10C188: main (fsm_stream_reassembler_many.cc:112)
==7600==  Address 0x4dbc920 is 0 bytes inside a block of size 1,015 free'd
==7600==    at 0x483CFBF: operator delete(void*) (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==7600==    by 0x10DC27: deallocate (new_allocator.h:125)
==7600==    by 0x10DC27: deallocate (alloc_traits.h:462)
==7600==    by 0x10DC27: _M_destroy (basic_string.h:226)
==7600==    by 0x10DC27: _M_dispose (basic_string.h:221)
==7600==    by 0x10DC27: ~basic_string (basic_string.h:657)
==7600==    by 0x10DC27: ~pair (stl_pair.h:208)
==7600==    by 0x10DC27: destroy<std::pair<long unsigned int, std::__cxx11::basic_string<char> > > (new_allocator.h:140)
==7600==    by 0x10DC27: destroy<std::pair<long unsigned int, std::__cxx11::basic_string<char> > > (alloc_traits.h:487)
==7600==    by 0x10DC27: _M_erase (stl_list.h:1917)
==7600==    by 0x10DC27: erase (list.tcc:158)
==7600==    by 0x10DC27: StreamReassembler::mergeSubstrings(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long) (stream_reassembler.cc:153)
==7600==    by 0x10E960: StreamReassembler::push_substring(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, bool) (stream_reassembler.cc:66)
==7600==    by 0x10C188: main (fsm_stream_reassembler_many.cc:112)
==7600==  Block was alloc'd at
==7600==    at 0x483BE63: operator new(unsigned long) (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==7600==    by 0x10CEE2: allocate (new_allocator.h:111)
==7600==    by 0x10CEE2: allocate (alloc_traits.h:436)
==7600==    by 0x10CEE2: _M_create (basic_string.tcc:153)
==7600==    by 0x10CEE2: void std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_construct<char*>(char*, char*, std::forward_iterator_tag) [clone .constprop.73] (basic_string.tcc:219)
==7600==    by 0x10D832: _M_construct_aux<char*> (basic_string.h:236)
==7600==    by 0x10D832: _M_construct<char*> (basic_string.h:255)
==7600==    by 0x10D832: basic_string (basic_string.h:440)
==7600==    by 0x10D832: pair<> (stl_pair.h:261)
==7600==    by 0x10D832: make_pair<long unsigned int const&, const std::__cxx11::basic_string<char>&> (stl_pair.h:529)
==7600==    by 0x10D832: StreamReassembler::mergeSubstrings(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long) (stream_reassembler.cc:123)
==7600==    by 0x10E960: StreamReassembler::push_substring(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, bool) (stream_reassembler.cc:66)
==7600==    by 0x10C0E2: main (fsm_stream_reassembler_many.cc:102)
==7600== 
==7600== Invalid read of size 2
==7600==    at 0x4842B3F: memmove (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==7600==    by 0x1109E9: copy (char_traits.h:352)
==7600==    by 0x1109E9: _S_copy (basic_string.h:340)
==7600==    by 0x1109E9: std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_mutate(unsigned long, unsigned long, char const*, unsigned long) (basic_string.tcc:322)
==7600==    by 0x10E3C8: _M_append (basic_string.tcc:370)
==7600==    by 0x10E3C8: append (basic_string.h:1222)
==7600==    by 0x10E3C8: operator+<char, std::char_traits<char>, std::allocator<char> > (basic_string.h:5994)
==7600==    by 0x10E3C8: StreamReassembler::mergeSubstrings(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long) (stream_reassembler.cc:164)
==7600==    by 0x10E960: StreamReassembler::push_substring(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, bool) (stream_reassembler.cc:66)
==7600==    by 0x10C188: main (fsm_stream_reassembler_many.cc:112)
==7600==  Address 0x4dbc924 is 4 bytes inside a block of size 1,015 free'd
==7600==    at 0x483CFBF: operator delete(void*) (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==7600==    by 0x10DC27: deallocate (new_allocator.h:125)
==7600==    by 0x10DC27: deallocate (alloc_traits.h:462)
==7600==    by 0x10DC27: _M_destroy (basic_string.h:226)
==7600==    by 0x10DC27: _M_dispose (basic_string.h:221)
==7600==    by 0x10DC27: ~basic_string (basic_string.h:657)
==7600==    by 0x10DC27: ~pair (stl_pair.h:208)
==7600==    by 0x10DC27: destroy<std::pair<long unsigned int, std::__cxx11::basic_string<char> > > (new_allocator.h:140)
==7600==    by 0x10DC27: destroy<std::pair<long unsigned int, std::__cxx11::basic_string<char> > > (alloc_traits.h:487)
==7600==    by 0x10DC27: _M_erase (stl_list.h:1917)
==7600==    by 0x10DC27: erase (list.tcc:158)
==7600==    by 0x10DC27: StreamReassembler::mergeSubstrings(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long) (stream_reassembler.cc:153)
==7600==    by 0x10E960: StreamReassembler::push_substring(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, bool) (stream_reassembler.cc:66)
==7600==    by 0x10C188: main (fsm_stream_reassembler_many.cc:112)
==7600==  Block was alloc'd at
==7600==    at 0x483BE63: operator new(unsigned long) (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==7600==    by 0x10CEE2: allocate (new_allocator.h:111)
==7600==    by 0x10CEE2: allocate (alloc_traits.h:436)
==7600==    by 0x10CEE2: _M_create (basic_string.tcc:153)
==7600==    by 0x10CEE2: void std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_construct<char*>(char*, char*, std::forward_iterator_tag) [clone .constprop.73] (basic_string.tcc:219)
==7600==    by 0x10D832: _M_construct_aux<char*> (basic_string.h:236)
==7600==    by 0x10D832: _M_construct<char*> (basic_string.h:255)
==7600==    by 0x10D832: basic_string (basic_string.h:440)
==7600==    by 0x10D832: pair<> (stl_pair.h:261)
==7600==    by 0x10D832: make_pair<long unsigned int const&, const std::__cxx11::basic_string<char>&> (stl_pair.h:529)
==7600==    by 0x10D832: StreamReassembler::mergeSubstrings(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long) (stream_reassembler.cc:123)
==7600==    by 0x10E960: StreamReassembler::push_substring(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, bool) (stream_reassembler.cc:66)
==7600==    by 0x10C0E2: main (fsm_stream_reassembler_many.cc:102)
==7600== 
[..tream_reassembler.cc:76 (push_substring)] After function mergeSubstrings
[..tream_reassembler.cc:77 (push_substring)] _index = 1024 (unsigned long)
[..tream_reassembler.cc:78 (push_substring)] _expectedNextByte = 1024 (unsigned long)
[..tream_reassembler.cc:86 (push_substring)] front.first = 1024 (unsigned long)
[..tream_reassembler.cc:87 (push_substring)] front.second.size() = 1024 (unsigned long)
[..tream_reassembler.cc:88 (push_substring)] front.second = "0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123" (std::string)
[..tream_reassembler.cc:104 (push_substring)] After write
[..tream_reassembler.cc:105 (push_substring)] _expectedNextByte = 2048 (unsigned long)
[..tream_reassembler.cc:106 (push_substring)] _output.peek_output(_output.buffer_size()) = "0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123" (std::string)
==7600== 
==7600== HEAP SUMMARY:
==7600==     in use at exit: 0 bytes in 0 blocks
==7600==   total heap usage: 359 allocs, 359 frees, 193,838 bytes allocated
==7600== 
==7600== All heap blocks were freed -- no leaks are possible
==7600== 
==7600== For lists of detected and suppressed errors, rerun with: -s
==7600== ERROR SUMMARY: 1525 errors from 9 contexts (suppressed: 0 from 0)
